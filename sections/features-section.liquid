{% comment %}
  Features Section with Mobile Swiper and Desktop Grid
  Displays feature items with icons, titles, and descriptions
{% endcomment %}

<div
  class="section-{{ section.id }}-padding center-on-desktop-{{ section.id }}"
  style="
    background-color: {{ section.settings.background_color }};
    --pt: {{ section.settings.padding_top_mobile }}px;
    --pt-desktop: {{ section.settings.padding_top_desktop }}px;
    --pb: {{ section.settings.padding_bottom_mobile }}px;
    --pb-desktop: {{ section.settings.padding_bottom_desktop }}px;
    --swiper-pagination-color: {{ section.settings.pagination_color }};
    --swiper-navigation-color: {{ section.settings.navigation_color }};
  "
>
  <style>
    .desktop-only-{{ section.id }} {
      display: none;
    }

    @media screen and (min-width: 750px) {
      .desktop-only-{{ section.id }} {
        display: block;
      }
      .mobile-only-{{ section.id }} {
        display: none;
      }
    }

    .section-{{ section.id }}-padding {
      padding-top: var(--pt);
      padding-bottom: var(--pb);
    }

    @media screen and (min-width: 750px) {
      .section-{{ section.id }}-padding {
        padding-top: var(--pt-desktop);
        padding-bottom: var(--pb-desktop);
      }
    }

    /* Mobile Swiper Styles */
    .swiper.swiper-{{ section.id }} {
      --swiper-pagination-bullet-inactive-color: {{ section.settings.pagination_inactive_color }};
      --swiper-pagination-bullet-inactive-opacity: 1;
      --swiper-pagination-bullet-horizontal-gap: 5px;
      --swiper-pagination-bottom: 0;
      padding-bottom: 24px;
    }

    .swiper-{{ section.id }} .swiper-slide {
      position: relative;
      height: auto;
    }

    .swiper-{{ section.id }} img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .text-content-{{ section.id }} {
        line-height: 1.3;
        flex-grow: 1;
        text-align: center;
    }

    .text-content-{{ section.id }} a {
      color: {{ section.settings.text_color }}
       !important;
    }

    .swiper-slide-image-{{ section.id }}, 
    .swiper-slide-image-{{ section.id }} svg {
      height: var(--icon-size) !important;
      width: var(--icon-size) !important;
      object-fit: contain;
      margin: 0 auto {{ section.settings.icon_margin_bottom }}px;
      color: {{ section.settings.icon_color }};
    }

    /* Desktop Grid Styles */
    .text-and-icons-grid-{{ section.id }} {
      display: grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap: {{ section.settings.grid_gap }}px;
    }

    @media screen and (min-width: 750px) {
      .text-and-icons-grid-{{ section.id }} {
        grid-template-columns: repeat({{ section.settings.columns_desktop }}, minmax(0, 1fr));
      }
    }

    .swiper-slide-title-{{ section.id }} {
      margin-bottom: {{ section.settings.title_margin_bottom }}px;
    }
  </style>

  <!-- Mobile Swiper -->
  <div class="mobile-only-{{ section.id }} page-width">
    <div class="swiper swiper-{{ section.id }}">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div
            class="swiper-slide"
            style="--icon-size: {{ section.settings.icon_size }}px;"
            {{ block.shopify_attributes }}
          >
            <div class="swiper-slide-image-{{ section.id }}">
              {% if block.settings.icon_svg != blank %}
                {{ block.settings.icon_svg }}
              {% elsif block.settings.icon_image != blank %}
                <img
                  src="{{ block.settings.icon_image | image_url }}"
                  alt="{{ block.settings.icon_alt }}"
                  width="auto"
                  height="auto"
                  loading="lazy"
                >
              {% endif %}
            </div>
            <div class="text-content-{{ section.id }}">
              <div
                class="swiper-slide-title-{{ section.id }}"
                style="
                  color: {{ section.settings.title_color }};
                  font-size: {{ section.settings.title_font_size }}px;
                  height: auto;
                "
              >
                {{ block.settings.title }}
              </div>
              <div
                style="
                  color: {{ section.settings.text_color }}!important;
                  font-size: {{ section.settings.description_font_size }}px;
                  margin-bottom: 0px;
                  max-width: {{ section.settings.description_max_width }}px;
                  margin-left: auto;
                  margin-right: auto;
                "
              >
                {{ block.settings.description }}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
      <div class="swiper-pagination swiper-pagination-{{ section.id }}"></div>
    </div>
  </div>

  <!-- Desktop Grid -->
  <div class="desktop-only-{{ section.id }} page-width">
    <div class="text-and-icons-grid-{{ section.id }}">
      {% for block in section.blocks %}
        <div
          class="swiper-slide"
          style="--icon-size: {{ section.settings.icon_size }}px;"
          {{ block.shopify_attributes }}
        >
          <div class="swiper-slide-image-{{ section.id }}">
            {% if block.settings.icon_svg != blank %}
              {{ block.settings.icon_svg }}
            {% elsif block.settings.icon_image != blank %}
              <img
                src="{{ block.settings.icon_image | image_url }}"
                alt="{{ block.settings.icon_alt }}"
                width="auto"
                height="auto"
                loading="lazy"
              >
            {% endif %}
          </div>
          <div class="text-content-{{ section.id }}">
            <div
              class="swiper-slide-title-{{ section.id }}"
              style="
                color: {{ section.settings.title_color }};
                font-size: {{ section.settings.title_font_size }}px;
                height: auto;
              "
            >
              {{ block.settings.title }}
            </div>
            <div
              style="
                color: {{ section.settings.text_color }}!important;
                font-size: {{ section.settings.description_font_size }}px;
                margin-bottom: 0px;
                max-width: {{ section.settings.description_max_width }}px;
                margin-left: auto;
                margin-right: auto;
              "
            >
              {{ block.settings.description }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const swiper = new Swiper('.swiper-{{ section.id }}', {
      slidesPerView: 1,
      spaceBetween: 30,
      loop: true,
      pagination: {
        el: '.swiper-pagination-{{ section.id }}',
        clickable: true,
      },
    });
  });
</script>

{% schema %}
{
  "name": "Features Section",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 27
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top (Desktop)",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 27
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom (Desktop)",
      "default": 36
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Title Font Size",
      "default": 15
    },
    {
      "type": "range",
      "id": "title_margin_bottom",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Title Margin Bottom",
      "default": 8
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "description_font_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description Font Size",
      "default": 13
    },
    {
      "type": "range",
      "id": "description_max_width",
      "min": 300,
      "max": 800,
      "step": 10,
      "unit": "px",
      "label": "Description Max Width",
      "default": 570
    },
    {
      "type": "header",
      "content": "Icon Settings"
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 20,
      "max": 60,
      "step": 1,
      "unit": "px",
      "label": "Icon Size",
      "default": 30
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "icon_margin_bottom",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Icon Margin Bottom",
      "default": 15
    },
    {
      "type": "header",
      "content": "Desktop Grid"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 4,
      "step": 1,
      "label": "Columns (Desktop)",
      "default": 3
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Grid Gap",
      "default": 30
    },
    {
      "type": "header",
      "content": "Swiper Pagination"
    },
    {
      "type": "color",
      "id": "pagination_color",
      "label": "Active Pagination Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "pagination_inactive_color",
      "label": "Inactive Pagination Color",
      "default": "#D9D9D9"
    },
    {
      "type": "color",
      "id": "navigation_color",
      "label": "Navigation Color",
      "default": "#000000"
    }
  ],
  "blocks": [
    {
      "type": "feature_item",
      "name": "Feature Item",
      "settings": [
        {
          "type": "html",
          "id": "icon_svg",
          "label": "Icon SVG Code",
          "info": "Paste SVG code here (recommended)"
        },
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Icon Image",
          "info": "Used if SVG is not provided"
        },
        {
          "type": "text",
          "id": "icon_alt",
          "label": "Icon Alt Text",
          "default": "Icon"
        },
        {
          "type": "html",
          "id": "title",
          "label": "Title",
          "default": "<p>Feature Title</p>"
        },
        {
          "type": "html",
          "id": "description",
          "label": "Description",
          "default": "<p>Feature description text goes here.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Features Section",
      "blocks": [
        {
          "type": "feature_item",
          "settings": {
            "icon_svg": "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" width=\"50px\" height=\"50px\" fill=\"currentColor\"><path d=\"M 0 8 L 0 10 L 28.09375 10 C 28.492188 10 29 10.507813 29 10.90625 L 29 38 L 18.90625 38 C 18.429688 35.164063 15.964844 33 13 33 C 10.035156 33 7.570313 35.164063 7.09375 38 L 3 38 C 2.445313 38 2 37.554688 2 37 L 2 28 L 0 28 L 0 37 C 0 38.644531 1.355469 40 3 40 L 7.09375 40 C 7.570313 42.835938 10.035156 45 13 45 C 15.964844 45 18.429688 42.835938 18.90625 40 L 34.09375 40 C 34.570313 42.835938 37.035156 45 40 45 C 42.964844 45 45.429688 42.835938 45.90625 40 L 47 40 C 47.832031 40 48.5625 39.625 49.09375 39.09375 C 49.625 38.5625 50 37.832031 50 37 L 50 27.40625 C 50 26.28125 49.570313 25.25 49.1875 24.46875 C 48.804688 23.6875 48.40625 23.125 48.40625 23.125 L 48.40625 23.09375 L 44.3125 17.59375 L 44.28125 17.59375 L 44.28125 17.5625 C 43.394531 16.453125 41.972656 15 40 15 L 32 15 C 31.640625 15 31.3125 15.066406 31 15.1875 L 31 10.90625 C 31 9.304688 29.695313 8 28.09375 8 Z M 0 12 L 0 14 L 18 14 L 18 12 Z M 0 16 L 0 18 L 15 18 L 15 16 Z M 32 17 L 36 17 L 36 26 C 36 26.832031 36.375 27.5625 36.90625 28.09375 C 37.4375 28.625 38.167969 29 39 29 L 48 29 L 48 37 C 48 37.167969 47.875 37.4375 47.65625 37.65625 C 47.4375 37.875 47.167969 38 47 38 L 45.90625 38 C 45.429688 35.164063 42.964844 33 40 33 C 37.035156 33 34.570313 35.164063 34.09375 38 L 31 38 L 31 18 C 31 17.832031 31.125 17.5625 31.34375 17.34375 C 31.5625 17.125 31.832031 17 32 17 Z M 38 17 L 40 17 C 40.824219 17 41.972656 17.925781 42.6875 18.8125 L 46.78125 24.28125 L 46.8125 24.3125 C 46.832031 24.339844 47.101563 24.722656 47.40625 25.34375 C 47.660156 25.859375 47.792969 26.472656 47.875 27 L 39 27 C 38.832031 27 38.5625 26.875 38.34375 26.65625 C 38.125 26.4375 38 26.167969 38 26 Z M 0 20 L 0 22 L 12 22 L 12 20 Z M 0 24 L 0 26 L 9 26 L 9 24 Z M 13 35 C 15.222656 35 17 36.777344 17 39 C 17 41.222656 15.222656 43 13 43 C 10.777344 43 9 41.222656 9 39 C 9 36.777344 10.777344 35 13 35 Z M 40 35 C 42.222656 35 44 36.777344 44 39 C 44 41.222656 42.222656 43 40 43 C 37.777344 43 36 41.222656 36 39 C 36 36.777344 37.777344 35 40 35 Z\"></path></svg>",
            "icon_alt": "Shipping",
            "title": "<p>Free Shipping</p>",
            "description": "<p>We offer Free Shipping for maximum customer comfort. Your satisfaction is important to us, which is why we offer smooth and free delivery.</p>"
          }
        },
        {
          "type": "feature_item",
          "settings": {
            "icon_svg": "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" width=\"50px\" height=\"50px\" fill=\"currentColor\"><path d=\"M 25 2 C 12.309534 2 2 12.309534 2 25 C 2 37.690466 12.309534 48 25 48 C 32.287796 48 38.785186 44.597914 43 39.300781 L 43 47 A 1.0001 1.0001 0 1 0 45 47 L 45 36 L 43.490234 36 L 43.390625 36 L 34 36 A 1.0001 1.0001 0 1 0 34 38 L 41.480469 38 C 37.635193 42.869289 31.692686 46 25 46 C 13.390466 46 4 36.609534 4 25 C 4 13.390466 13.390466 4 25 4 C 36.609534 4 46 13.390466 46 25 A 1.0001 1.0001 0 1 0 48 25 C 48 12.309534 37.690466 2 25 2 z M 24.984375 8.9863281 A 1.0001 1.0001 0 0 0 24 10 L 24 22.175781 A 3 3 0 0 0 25 28 A 3 3 0 0 0 27.826172 26 L 36 26 A 1.0001 1.0001 0 1 0 36 24 L 27.828125 24 A 3 3 0 0 0 26 22.171875 L 26 10 A 1.0001 1.0001 0 0 0 24.984375 8.9863281 z\"></path></svg>",
            "icon_alt": "Return",
            "title": "<p>30-Day Return Guarantee</p>",
            "description": "<p>Your satisfaction is our focus. Our 30-day return policy guarantees you maximum flexibility and the best shopping experience.</p>"
          }
        },
        {
          "type": "feature_item",
          "settings": {
            "icon_svg": "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" width=\"50px\" height=\"50px\" fill=\"currentColor\"><path d=\"M 7 9 C 4.2504839 9 2 11.250484 2 14 L 2 36 C 2 38.749516 4.2504839 41 7 41 L 25 41 L 29.636719 41 C 29.389719 40.366 29.166797 39.699 28.966797 39 L 25 39 L 7 39 C 5.3315161 39 4 37.668484 4 36 L 4 21 L 46 21 L 46 24 L 46 27.859375 C 46.562 28.091375 47.21 28.321922 48 28.544922 L 48 24 L 48 14 C 48 11.250484 45.749516 9 43 9 L 7 9 z M 7 11 L 43 11 C 44.668484 11 46 12.331516 46 14 L 46 16 L 4 16 L 4 14 C 4 12.331516 5.3315161 11 7 11 z M 9 24 L 9 26 L 25 26 L 25 24 L 9 24 z M 40 27.900391 C 38.5 27.900391 37.500781 28.4 36.300781 29 C 35.100781 29.6 33.600781 30.300391 30.800781 30.900391 L 30 31.099609 L 30 31.900391 C 30 44.900391 39.2 49.600781 39.5 49.800781 L 40 50 L 40.5 49.800781 C 40.9 49.600781 50 44.500391 50 31.900391 L 50 31.099609 L 49.199219 30.900391 C 46.399219 30.300391 44.899219 29.6 43.699219 29 C 42.499219 28.4 41.5 27.900391 40 27.900391 z M 40 29.900391 C 41.1 29.900391 41.700781 30.200781 42.800781 30.800781 C 44.000781 31.300781 45.5 32.099219 48 32.699219 C 47.7 41.999219 41.7 46.599219 40 47.699219 C 38.2 46.699219 32.3 42.399219 32 32.699219 C 34.6 32.099219 36.099219 31.300781 37.199219 30.800781 C 38.299219 30.200781 38.9 29.900391 40 29.900391 z\"></path></svg>",
            "icon_alt": "Payment",
            "title": "<p>100% Secure Payment</p>",
            "description": "<p>We offer you a variety of secure payment options. Pay easily and enjoy a safe shopping experience.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
